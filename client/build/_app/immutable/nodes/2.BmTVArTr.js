import{f as x,a as C}from"../chunks/bVCwSBlQ.js";import"../chunks/C9hYMv-D.js";import{w as A,x as S,z as K,A as I,a5 as W,ao as Z,m as M,I as ee,C as ae,ap as re,aq as te,ar as se,E as ie,as as oe,at as ne,a4 as fe,au as ve,av as le,a6 as ce,j as w,f as D,aw as ue,p as de,t as _e,a as he,c as b,r as h,g,b as Y,s as R,W as U,q as me,n as ye}from"../chunks/yOySMhR8.js";import{a as pe,s as we,d as be}from"../chunks/sI0ywRDU.js";import{o as ge}from"../chunks/Nrfq2IzI.js";let H=!1;function J(){H||(H=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var a;if(!e.defaultPrevented)for(const r of e.target.elements)(a=r.__on_r)==null||a.call(r)})},{capture:!0}))}function Q(e){var a=K,r=I;A(null),S(null);try{return e()}finally{A(a),S(r)}}function Ee(e,a,r,t=r){e.addEventListener(a,()=>Q(r));const s=e.__on_r;s?e.__on_r=()=>{s(),t(!0)}:e.__on_r=()=>t(!0),J()}function Le(e,a){M&&ee(ae(e)),W(()=>{var r=a();for(var t in r){var s=r[t];s?e.style.setProperty(t,s):e.style.removeProperty(t)}}),Z(()=>{e.remove()})}const ke=Symbol("is custom element"),Te=Symbol("is html");function Ae(e){if(M){var a=!1,r=()=>{if(!a){if(a=!0,e.hasAttribute("value")){var t=e.value;j(e,"value",null),e.value=t}if(e.hasAttribute("checked")){var s=e.checked;j(e,"checked",null),e.checked=s}}};e.__on_r=r,re(r),J()}}function j(e,a,r,t){var s=Se(e);M&&(s[a]=e.getAttribute(a),a==="src"||a==="srcset"||a==="href"&&e.nodeName==="LINK")||s[a]!==(s[a]=r)&&(a==="loading"&&(e[te]=r),e.removeAttribute(a))}function Se(e){return e.__attributes??(e.__attributes={[ke]:e.nodeName.includes("-"),[Te]:e.namespaceURI===se})}const xe=()=>performance.now(),u={tick:e=>requestAnimationFrame(e),now:()=>xe(),tasks:new Set};function X(){const e=u.now();u.tasks.forEach(a=>{a.c(e)||(u.tasks.delete(a),a.f())}),u.tasks.size!==0&&u.tick(X)}function Ce(e){let a;return u.tasks.size===0&&u.tick(X),{promise:new Promise(r=>{u.tasks.add(a={c:e,f:r})}),abort(){u.tasks.delete(a)}}}function T(e,a){Q(()=>{e.dispatchEvent(new CustomEvent(a))})}function Me(e){if(e==="float")return"cssFloat";if(e==="offset")return"cssOffset";if(e.startsWith("--"))return e;const a=e.split("-");return a.length===1?a[0]:a[0]+a.slice(1).map(r=>r[0].toUpperCase()+r.slice(1)).join("")}function G(e){const a={},r=e.split(";");for(const t of r){const[s,i]=t.split(":");if(!s||i===void 0)break;const n=Me(s.trim());a[n]=i.trim()}return a}const Ne=e=>e;function Pe(e,a,r,t){var s=(e&ve)!==0,i="both",n,c=a.inert,E=a.style.overflow,o,v;function m(){var l=K,p=I;A(null),S(null);try{return n??(n=r()(a,(t==null?void 0:t())??{},{direction:i}))}finally{A(l),S(p)}}var y={is_global:s,in(){a.inert=c,T(a,"introstart"),o=O(a,m(),v,1,()=>{T(a,"introend"),o==null||o.abort(),o=n=void 0,a.style.overflow=E})},out(l){a.inert=!0,T(a,"outrostart"),v=O(a,m(),o,0,()=>{T(a,"outroend"),l==null||l()})},stop:()=>{o==null||o.abort(),v==null||v.abort()}},_=I;if((_.transitions??(_.transitions=[])).push(y),pe){var d=s;if(!d){for(var f=_.parent;f&&(f.f&ie)!==0;)for(;(f=f.parent)&&(f.f&oe)===0;);d=!f||(f.f&ne)!==0}d&&fe(()=>{D(()=>y.in())})}}function O(e,a,r,t,s){var i=t===1;if(le(a)){var n,c=!1;return ce(()=>{if(!c){var l=a({direction:i?"in":"out"});n=O(e,l,r,t,s)}}),{abort:()=>{c=!0,n==null||n.abort()},deactivate:()=>n.deactivate(),reset:()=>n.reset(),t:()=>n.t()}}if(r==null||r.deactivate(),!(a!=null&&a.duration))return s(),{abort:w,deactivate:w,reset:w,t:()=>t};const{delay:E=0,css:o,tick:v,easing:m=Ne}=a;var y=[];if(i&&r===void 0&&(v&&v(0,1),o)){var _=G(o(0,1));y.push(_,_)}var d=()=>1-t,f=e.animate(y,{duration:E});return f.onfinish=()=>{var l=(r==null?void 0:r.t())??1-t;r==null||r.abort();var p=t-l,L=a.duration*Math.abs(p),q=[];if(L>0){var z=!1;if(o)for(var B=Math.ceil(L/16.666666666666668),N=0;N<=B;N+=1){var $=l+p*m(N/B),V=G(o($,1-$));q.push(V),z||(z=V.overflow==="hidden")}z&&(e.style.overflow="hidden"),d=()=>{var k=f.currentTime;return l+p*m(k/L)},v&&Ce(()=>{if(f.playState!=="running")return!1;var k=d();return v(k,1-k),!0})}f=e.animate(q,{duration:L,fill:"forwards"}),f.onfinish=()=>{d=()=>t,v==null||v(t,1-t),s()}},{abort:()=>{f&&(f.cancel(),f.effect=null,f.onfinish=w)},deactivate:()=>{s=w},reset:()=>{t===0&&(v==null||v(1,0))},t:()=>d()}}function Fe(e,a,r=a){var t=ue();Ee(e,"input",s=>{var i=s?e.defaultValue:e.value;if(i=P(e)?F(i):i,r(i),t&&i!==(i=a())){var n=e.selectionStart,c=e.selectionEnd;e.value=i??"",c!==null&&(e.selectionStart=n,e.selectionEnd=Math.min(c,e.value.length))}}),(M&&e.defaultValue!==e.value||D(a)==null&&e.value)&&r(P(e)?F(e.value):e.value),W(()=>{var s=a();P(e)&&s===F(e.value)||e.type==="date"&&!s&&!e.value||s!==e.value&&(e.value=s??"")})}function P(e){var a=e.type;return a==="number"||a==="range"}function F(e){return e===""?null:+e}const Ie=e=>e;function Re(e,{delay:a=0,duration:r=400,easing:t=Ie}={}){const s=+getComputedStyle(e).opacity;return{delay:a,duration:r,easing:t,css:i=>`opacity: ${i*s}`}}var Ue=x(`<div id="box" class="svelte-1eu4sht"><h1 id="title" class="svelte-1eu4sht">Playgrate</h1> <h2 id="subtitle" class="svelte-1eu4sht">Transferring playlists shouldn't be so hard.</h2></div>`);function Oe(e){var a=Ue();Pe(3,a,()=>Re),C(e,a)}var qe=x('<div class="svelte-z1s8xo"><a href="/spotify-login" class="svelte-z1s8xo"><h2 id="username" class="svelte-z1s8xo"> </h2></a></div>');function ze(e,a){de(a,!0);let r=Y("Login!");async function t(){let o=await fetch("/spotify-id");if(!o.ok)throw new Error(`Response status: ${o.status}`);R(r,await o.text(),!0),g(r)=="U0VTU0lPTk5PVFNFVA=="&&R(r,"Login!")}ge(async()=>{t()});var s=qe(),i=b(s),n=b(i),c=b(n,!0);h(n),h(i),h(s),_e(()=>we(c,g(r))),C(e,s),he()}function Be(e,a){const r=document.getElementById("username");if(r&&r.innerHTML!="Login!"){let t=window.location.href;g(a)!==""&&(t=t+"/start-scrape/apple-music/?playlistURL="+g(a),window.location.href=t)}}var $e=x('<div class="svelte-lam5na"><input id="url-input" type="url" placeholder="https://music.apple.com/your-playlist" class="svelte-lam5na"/> <button class="svelte-lam5na">Migrate!</button></div>');function Ve(e){let a=Y("");var r=$e(),t=b(r);Ae(t);var s=U(t,2);s.__click=[Be,a],h(r),Fe(t,()=>g(a),i=>R(a,i)),C(e,r)}be(["click"]);var He=x('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <div id="main-container" class="svelte-x66a89"><!> <br/> <br/> <!> <div id="request" class="svelte-x66a89"><h4 class="svelte-x66a89">Please do not close the tab once started!</h4></div></div>',1);function Ye(e){var a=He(),r=me(a);Le(r,()=>({"--color":"#26eb6b"})),ze(r.lastChild,{}),h(r);var t=U(r,2),s=b(t);Oe(s);var i=U(s,6);Ve(i),ye(2),h(t),C(e,a)}export{Ye as component};
