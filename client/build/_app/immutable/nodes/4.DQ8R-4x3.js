import{f as w,a as _}from"../chunks/BIQHu0zT.js";import{o as y}from"../chunks/Bt1YySA6.js";import{p as k,g as l,s as o,t as x,a as L,b,c,r as p}from"../chunks/yokdoQzp.js";import{s as R}from"../chunks/Cv__B3gN.js";var I=w('<div class="svelte-15x5yc"><h1 class="svelte-15x5yc"> </h1></div>');function S(d,f){k(f,!0);let a="";async function h(){console.log("Retrieving playlist id");let e=await fetch("/scraped-playlist-id");if(!e.ok)throw new Error(`Response status: ${e.status}`);a=await e.text(),console.log("Got playlist id "+a)}let r=!1;async function g(){console.log("checking for thread");let e=await fetch("/check-thread/"+a),n=await e.text(),m=JSON.parse(n).response;if(console.log("Response: "+n),!e.ok)throw new Error(`Response status: ${e.status}`);m=="Done"&&(r=!0)}setInterval(async()=>{await g(),r&&(window.location.href="/generateAM")},2400);let t=b("Loading.");setInterval(()=>{switch(l(t)){case"Loading.":o(t,"Loading..");break;case"Loading..":o(t,"Loading...");break;case"Loading...":o(t,"Loading.");break}},800),y(async()=>{h()});var s=I(),i=c(s),u=c(i,!0);p(i),p(s),x(()=>R(u,l(t))),_(d,s),L()}export{S as component};
