import{f as w,a as _}from"../chunks/bVCwSBlQ.js";import{o as k}from"../chunks/Nrfq2IzI.js";import{p as y,g as l,s as o,t as x,a as L,b,c,r as p,n as R}from"../chunks/yOySMhR8.js";import{s as I}from"../chunks/sI0ywRDU.js";var D=w(`<div class="svelte-1fdifr0"><h1 class="svelte-1fdifr0"> </h1> <p class="svelte-1fdifr0">Please don't close out of the tab!</p></div>`);function $(d,f){y(f,!0);let a="";async function h(){console.log("Retrieving playlist id");let e=await fetch("/scraped-playlist-id");if(!e.ok)throw new Error(`Response status: ${e.status}`);a=await e.text(),console.log("Got playlist id "+a)}let r=!1;async function g(){console.log("checking for thread");let e=await fetch("/check-thread/"+a),n=await e.text(),m=JSON.parse(n).response;if(console.log("Response: "+n),!e.ok)throw new Error(`Response status: ${e.status}`);m=="Done"&&(r=!0)}setInterval(async()=>{await g(),r&&(window.location.href="/generateAM")},2400);let t=b("Loading.");setInterval(()=>{switch(l(t)){case"Loading.":o(t,"Loading..");break;case"Loading..":o(t,"Loading...");break;case"Loading...":o(t,"Loading.");break}},800),k(async()=>{h()});var s=D(),i=c(s),u=c(i,!0);p(i),R(2),p(s),x(()=>I(u,l(t))),_(d,s),L()}export{$ as component};
